# golang的安装


## golang安装

以下是一个在 Windows 11 上直接解压并配置 Golang 的详细步骤。首先，你需要下载一个 Go 的 ZIP 压缩包，而不是 `.msi` 安装包。

以下是步骤：

1. **下载 Go 二进制包**:
    - 访问 Go 官方下载页面 [https://golang.org/dl/](https://golang.org/dl/)
    - 在页面中找到 Windows 下的 `.zip` 文件，下载它。例如，`go1.17.windows-amd64.zip`（版本号可能会根据时间有所不同）。

2. **解压文件**:
    - 找到你下载的 `.zip` 文件。
    - 右键点击文件，选择解压到适当的位置。例如，你可以解压到 `C:\Go`。这样你就有了 `C:\Go\bin`，这是所有 Go 的可执行文件的位置。

3. **配置环境变量**:
    - 按下 `Win + X`，然后选择 `系统`。
    - 点击 `高级系统设置`。
    - 在系统属性窗口中，点击 `环境变量` 按钮。
    - 在系统变量部分，找到 `Path` 变量并点击编辑。
    - 在编辑环境变量窗口中，点击新建，然后添加 `C:\Go\bin`（如果你把 Go 解压到了其他位置，请确保此路径与你的解压位置相匹配）。
    - 确认所有的对话框。

4. **配置 GOPATH（如果需要）**:
    - 虽然从 Go 1.11 开始，`GOPATH` 默认设置为用户目录下的 `go` 文件夹，但如果你想指定一个不同的工作区，你可以设置 `GOPATH` 环境变量。
    - 在上述的环境变量窗口，点击 `新建`，变量名为 `GOPATH`，变量值为你的工作区路径，例如 `C:\Users\YourName\go-workspace`。

5. **验证安装**:
    - 打开命令提示符或 PowerShell。
    - 输入 `go version`。如果显示了 Go 的版本信息，说明你已经成功安装并配置了 Go。

现在你应该已经成功地在 Windows 11 上通过解压方式安装了 Golang！

## GO111MODULE 开启

要在 Go 中开启模块支持，你需要设置 `GO111MODULE` 环境变量。从 Go 1.11 开始，Go 介绍了此模块支持，并在后续的版本中得到了改进和完善。从 Go 1.13 开始，模块支持已经成为了默认选项，但你仍然可以使用 `GO111MODULE` 环境变量来明确控制其行为。

下面是如何开启 `GO111MODULE`：

1. **命令行临时开启**:

   你可以在命令行中临时为当前会话开启 `GO111MODULE`，只需执行以下命令：

   ```bash
   set GO111MODULE=on
   ```

   在 PowerShell 中，你应使用：

   ```powershell
   $env:GO111MODULE = "on"
   ```

   这种方式仅在当前的命令行会话中有效。

2. **永久开启**:

   如果你想永久地在你的系统上开启 `GO111MODULE`，你可以将其添加到环境变量中。

   - 按下 `Win + X`，然后选择 `系统`。
   - 点击 `高级系统设置`。
   - 在系统属性窗口中，点击 `环境变量` 按钮。
   - 在用户变量部分，点击 `新建`，并为其设置变量名为 `GO111MODULE` 和变量值为 `on`。

而命令 `go env -w GO111MODULE=on` 是一个更简单、直接的方法，用于设置 Go 的环境变量。从 Go 1.13 版本开始，你可以使用 `go env -w` 来永久地设置 Go 环境变量，而不是通过系统设置或修改 shell 配置文件。

以下是使用步骤：

1. 打开命令提示符或 PowerShell。

2. 输入以下命令：

   ```
   go env -w GO111MODULE=on
   ```

3. 执行后，`GO111MODULE` 将被设置为 `on`。这意味着你在任何地方运行 Go 命令时，都会使用模块支持。

如果你想查看已设置的 Go 环境变量，只需运行 `go env`。

使用 `go env -w` 的好处是它直接修改了 Go 的配置，这样你无需在各种 shell 或操作系统环境中手动设置。当然，要确保你使用的 Go 版本是 1.13 或更高，否则这个命令可能不可用。

这样，无论何时你使用 Go 命令，模块支持都将开启。如果你想禁用它，可以将 `GO111MODULE` 的值设置为 `off`。

## 配置 Proxy

在某些情况下，由于网络限制或其他原因，直接访问 Go 的模块存储库可能会遇到困难。为了解决这个问题，你可以配置 Go 使用一个代理。

`https://goproxy.cn` 是一个在中国大陆受欢迎的 Go 模块代理服务。

以下是如何配置 Go 使用 `goproxy.cn`：

1. 打开命令提示符或 PowerShell。

2. 输入以下命令：

   ```bash
   go env -w GOPROXY=https://goproxy.cn,direct
   ```

这个命令做了以下事情：

- `GOPROXY=https://goproxy.cn,direct`：这告诉 Go 先尝试从 `goproxy.cn` 获取模块。如果 `goproxy.cn` 无法访问或模块在代理上不存在，它会直接从源存储库获取，这就是 `,direct` 的作用。

完成上述操作后，每次你使用 `go get` 或任何涉及下载模块的 Go 命令时，Go 都会尝试从 `goproxy.cn` 获取模块。

如果你需要取消代理设置，可以使用以下命令：

```bash
go env -w GOPROXY=direct
```

这将指示 Go 直接从源存储库获取模块，而不使用任何代理。

## 配置检查

要查看 Go 的当前环境配置，你可以使用以下两个命令：

1. **查看所有 Go 环境变量**:
   执行以下命令：
   ```bash
   go env
   ```
   这会列出所有的 Go 环境变量及其当前值。

2. **查看特定的 Go 环境变量**:
   如果你只关心 `GOPROXY` 的值，可以执行：
   ```bash
   go env GOPROXY
   ```
   这将仅显示 `GOPROXY` 的当前值。

这两个命令对于快速检查和调试 Go 的配置非常有用，特别是当你想确认你的代理设置或其他环境变量是否正确配置时。